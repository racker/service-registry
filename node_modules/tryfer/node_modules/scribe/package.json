{
  "name": "scribe",
  "description": "Scribe client",
  "version": "0.0.8",
  "repository": {
    "type": "git",
    "url": "git://github.com/Applifier/node-scribe"
  },
  "dependencies": {
    "thrift": "0.7.0"
  },
  "author": {
    "name": "Applifier",
    "email": "opensource@applifier.com"
  },
  "readme": "# node-scribe\nScribe client for node.js. Project also includes a drop-in replacement (Logger) for the default console object.\n## Installation\n    $ npm install scribe\n## Basic example\nExample of sending log entries to scribe server.\n\n    var Scribe = require('scribe').Scribe;\n\n    var scribe = new Scribe(\"localhost\", 1234, {autoReconnect:true});\n\n    scribe.open(function(err){\n\n      if(err) {\n        return console.log(err);\n      }\n\n      scribe.send(\"foocategory\", \"foomessage\");\n\n      scribe.close();\n\n    });\n\n## autoReconnect = true\nIf autoReconnect is set to true and connection fails, client will store log entries to queue and flush when connection has been re-established.\n\n## Logger\nLogger is an drop-in replacement for the default console object. Each log entry contains the level, hostname, pid, caller (file and position) and the log message given as parameter. Values are separated by tabulators.\n\n### Log levels\nLevels are defined by the function used or by hand when using the logMessage function.<br />\n    0 : EMERG <br />\n    1 : ALERT <br />\n    2 : CRITICAL (critical)<br />\n    3 : ERROR (error)<br />\n    4 : WARN (warn)<br />\n    5 : NOTICE<br />\n    6 : INFO (info)<br />\n    7 : DEBUG (debug, log)<br />\n\n### Example\nExample of using logger to replace node:s console object.\n\n    var Scribe = require('scribe').Scribe;\n    var Logger = require('scribe').Logger;\n\n    var scribe = new Scribe(\"localhost\", 1234, {autoReconnect:true});\n    var logger = new Logger(scribe, \"foobar\");\n    scribe.open(function(err){\n\n      if(err) {\n        return console.log(err);\n      }\n\n      logger.log(\"foomessage\");\n\n      logger.replaceConsole(); // replaces console with logger\n\n      console.log(\"foobar\");\n\n      logger.releaseConsole(); // reverts changes made by replaceConsole();\n\n      scribe.close();\n\n    });\n\n# RequestLog\n\nCreates a middleware which will inject every req object with a log object.\nThe log object contains an pseudo-unique id for each request in the req.log.id variable.\n\nIn addition the req.log object contains console.log compatible logging functions:\nlog, info, warn, error, critical.\n\nEach log message logged using those methods is passed into the custom writer() function,\nwhich the user must pass in the factory constructor.\n\nThe writer takes the following arguments:\nfunction writer(level, request_id, line, message), where:\n - level is the numeric log level as defined in Logger:\n     Logger.LOG_DEBUG = 7;\n     Logger.LOG_INFO = 6;\n     Logger.LOG_WARNING = 4;\n     Logger.LOG_ERROR = 3;\n     Logger.LOG_CRITICAL = 2;\n - request_id is the pseudo-randomly generated unique id for the request\n - line is a stacktrace line where the log message was generated, in form of \"/path/to/file.js:line:character\", eg \"/path:tio:file.js:282:24\"\n - message is a concatenated string of all the arguments passed to the log function\n\nHere's an example how we have used the writer to feed log lines to scribe:\n\n    var hostname = require('os').hostname();\n    app.use(RequestLog.factory(function (level, id, line, msg) {\n       var str = RequestLog.formatTimestamp(new Date()) + \"\\t\" + RequestLog.levelNames[level] + \"\\t\" + hostname + \"\\t\" + process.pid + \"\\t\" + line + \"\\t\" + id + \"\\t\" + msg;\n       scribe.send(\"comet\", str);\n    }));\n    \nNote that the req.log object is mostly compatible with the standard console object.\nThis means that you can implement functions which accept an ubique 'logger' argument and you can log messages\nwithin these functions by calling for example logger.error(\"Something bad!\"); Then you can pass the req.log\nobject as the logger object, or simply pass 'console' from within your tests where you don't have access\nto a request related req object.\n\nExample:\n\n\n    // Your function somewhere in your code, not directly related to any express request processing\n    function someFunction(value, logger) {\n      if (value == null) {\n        logger.error(\"Value was null\");\n      }\n    }\n    \n    // Function which is directly related to express, for example a middleware\n    function processRequest(req, res, next) {\n      var value = req.query.value;\n      someFunction(value, req.log);\n      next();\n    }\n    \n    // You can test the someFunction in your TDD environment by passing console instead of req.log:\n    test(\"my test\", function() {\n      someFunction(\"value\", console);\n    }\n\n## License\n(The MIT License)\n\nCopyright(c) 2011 Applifier Ltd.<br />\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.",
  "readmeFilename": "README.md",
  "_id": "scribe@0.0.8",
  "_from": "scribe@"
}
